digraph the_original {
    # PipelineTasks
    node [shape=box,style="filled,bold",fillcolor="gray70"];
    isr [label="isr\n{detector, exposure}"];
    characterizeImage [label="characterizeImage\n{detector, visit}"];
    calibrate [label="calibrate\n{detector, visit}"];
    writeSourceTable [label="writeSourceTable\n{detector, visit}"];
    transformSourceTable [label="transformSourceTable\n{detector, visit}"];
    consolidateVisitSummary [label="consolidateVisitSummary\n{visit}"];
    consolidateSourceTable [label="consolidateSourceTable\n{visit}"];
    jointcal [label="jointcal\n{instrument, tract}"];
    fgcm [label="(FGCM tasks)\n{instrument}"];
    correctSky [label="correctSky\n{visit}"];
    makeWarp [label="makeWarp\n{tract, patch, visit}"];
    compareWarpAssembleCoadd [label="compareWarpAssembleCoadd\n{tract, patch, band}"];
    # DatasetTypes
    node [style="rounded,filled", fillcolor="gray90"];
    raw [label="raw\n{detector, exposure}\nExposure"];
    postISRCCD [label="postISRCCD\n{detector, exposure}\nExposure"];
    icExp [label="icExp\n{detector, visit}\nExposure"];
    icExpBackground [label="icExpBackground\n{detector,visit}\nBackground"];
    icSrc [label="icSrc\n{detector, visit}\nSourceCatalog"];
    src [label="src\n{detector, visit}\nSourceCatalog"];
    calexp [label="calexp\n{detector, visit}\nExposure"];
    calexpBackground [label="calexpBackground\n{detector,visit}\nBackground"];
    source [label="source\n{detector, visit}\nDataFrame"];
    sourceTable [label="source\n{detector, visit}\nDataFrame"];
    visitSummary [label="visitSummary\n{visit}\nExposureCatalog"];
    sourceTable_visit [label="sourceTable_visit\n{visit}\nDataFrame"];
    jointcalWcsCatalog [label="jointcalWcsCatalog\n{detector,visit,tract}\nExposureCatalog"];
    fgcmPhotoCalibCatalog [label="fgcmPhotoCalibCatalog\n{visit}\nExposureCatalog"];
    skyCorr [label="skyCorr\n{visit}\nBackground"];
    warps [label="(various warps)\n{tract, patch, visit}\nExposure"];
    # Connections
    raw -> isr;
    isr -> postISRCCD;
    postISRCCD -> characterizeImage;
    characterizeImage -> icExp;
    characterizeImage -> icExpBackground;
    characterizeImage -> icSrc;
    icExp -> calibrate;
    icExpBackground -> calibrate;
    icSrc -> calibrate;
    calibrate -> calexp;
    calibrate -> calexpBackground;
    calibrate -> src;
    src -> writeSourceTable;
    writeSourceTable -> source;
    source -> transformSourceTable;
    transformSourceTable -> sourceTable;
    calexp -> consolidateVisitSummary;
    consolidateVisitSummary -> visitSummary;
    sourceTable -> consolidateSourceTable;
    consolidateSourceTable -> sourceTable_visit;
    visitSummary -> jointcal;
    sourceTable_visit -> jointcal;
    jointcal -> jointcalWcsCatalog;
    visitSummary -> fgcm;
    sourceTable_visit -> fgcm;
    calexpBackground -> fgcm;
    fgcm -> fgcmPhotoCalibCatalog;
    calexp -> correctSky;
    calexpBackground -> correctSky;
    correctSky -> skyCorr;
    calexp -> makeWarp;
    jointcalWcsCatalog -> makeWarp;
    fgcmPhotoCalibCatalog -> makeWarp;
    skyCorr -> makeWarp;
    makeWarp -> warps;
    warps -> compareWarpAssembleCoadd;
}
